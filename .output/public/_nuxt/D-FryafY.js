import{X as s,M as r,n as a}from"./CvPgl9uc.js";const o=s("auth",{state:()=>({isLoggedIn:!1,user:null}),getters:{isAdmin:t=>t.user?.role==="admin",isMitarbeiter:t=>t.user?.role==="mitarbeiter"},actions:{async login(t){try{const e=await $fetch("/api/auth/login",{method:"POST",body:t});return e.success?(this.isLoggedIn=!0,this.user=e.user,{success:!0}):{success:!1,error:e.error||"Anmeldung fehlgeschlagen"}}catch{return{success:!1,error:"Ein Fehler ist aufgetreten"}}},async logout(){this.isLoggedIn=!1,this.user=null,await $fetch("/api/auth/logout",{method:"POST"}),a("/login")},async initFromCookie(){if(r("auth_token").value)try{const e=await $fetch("/api/auth/me");e?.user&&(this.isLoggedIn=!0,this.user=e.user)}catch{}}}});export{o as u};
